{%- liquid
  assign column_mobile = block.settings.column_mobile | default: 1 | plus: 0
  assign column_desktop = block.settings.column_desktop | default: 2 | plus: 0
  assign row_mobile = block.settings.row_mobile | default: 1 | plus: 0
  assign row_desktop = block.settings.row_desktop | default: 1 | plus: 0
-%}

<div
  id="element-{{ block.id }}"
  class="
    block-grid-item card card--has-background card--hover card-hover-animation--accent-without-text
    {% if block.settings.remove_padding %} card--no-padding {% endif %}
    {% if block.settings.remove_border_radius or block.settings.remove_padding %} card--no-radius {% endif %}
    {% if block.settings.hide_on_mobile %} palm-hide {% endif %}
  "
  style="
    --column-desktop: {{ column_desktop }};
    --column-mobile: {{ column_mobile }};
    --row-mobile: {{ row_mobile }};
    --row-desktop: {{ row_desktop }};
    --rich-text-gutter:var(--{% unless block.settings.gutter == 'grid-padding' %}gutter-{% endunless %}{{ block.settings.gutter }});
  "
  data-js-prlx-parent
  {{ block.shopify_attributes }}
>
  {%- if block.settings.card_hover == 'accent' -%}
    <div class="card__hover"></div>
  {%- endif -%}

  <div
    class="card__content {% if block.settings.disable_border %} card--no-borders {% endif %}"
    data-js-prlx-children
    style="--border-width-grid: {{ settings.border_width_grid }}px;"
  >
    <div class="align-content align-content--{{ block.settings.alignment }}" data-js-prlx-children>
      <div
        class="card__text gutter--{{ block.settings.gutter }} element--width-{{ block.settings.width }}"
        style="--horizontal-alignment:{{ block.settings.alignment | split: ' ' | first | replace: 'horizontal-', '' }};"
      >
        <div
          class="spacing--custom remove-empty-space"
          style="--spacing:{{ block.settings.spacing }}px;"
        >
          {% content_for 'blocks' %}
        </div>
      </div>
    </div>
  </div>

  {%- liquid
    assign card_class = '#element-' | append: block.id | append: ' .card__content'
    render 'color-scheme', color_scheme: block.settings.color_scheme_card, class: card_class, force_color_scheme: true
  -%}

  {% style %}
    #element-{{ block.id }}.card--hover .card__text .heading {
      margin-bottom: 0 !important;
    }
  {% endstyle %}
</div>

{% schema %}
{
  "name": "t:theme_blocks.grid-text.name",
  "tag": null,
  "blocks": [{ "type": "@app" }, { "type": "@theme" }],
  "settings": [
    {
      "type": "header",
      "content": "t:theme_blocks.sections.flex-section.grid_design"
    },
    {
      "type": "range",
      "id": "column_desktop",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "t:theme_blocks.grid-text.column_desktop",
      "default": 2
    },
    {
      "type": "range",
      "id": "row_desktop",
      "min": 1,
      "max": 4,
      "step": 1,
      "label": "t:theme_blocks.grid-text.row_desktop",
      "default": 1
    },
    {
      "type": "checkbox",
      "id": "hide_on_mobile",
      "label": "t:raw-extra-words.sections.collections.promo.settings.hide_on_mobile",
      "default": false
    },
    {
      "type": "select",
      "id": "column_mobile",
      "visible_if": "{{ block.settings.hide_on_mobile == false }}",
      "label": "t:theme_blocks.grid-text.column_mobile",
      "options": [
        {
          "label": "t:sections.local-extra-words.sections.columns.option__0",
          "value": "1"
        },
        {
          "label": "t:sections.local-extra-words.sections.columns.option__1",
          "value": "2"
        }
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "row_mobile",
      "visible_if": "{{ block.settings.hide_on_mobile == false }}",
      "label": "t:theme_blocks.grid-text.row_mobile.label",
      "options": [
        {
          "label": "t:theme_blocks.grid-text.row_mobile.option_1",
          "value": "1"
        },
        {
          "label": "t:theme_blocks.grid-text.row_mobile.option_2",
          "value": "2"
        }
      ],
      "default": "1"
    },
    {
      "type": "header",
      "content": "t:settings_schema.typography.name"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "t:sections.image-with-text.settings.text_alignment.label",
      "options": [
        {
          "value": "horizontal-left align-content--vertical-top",
          "label": "t:sections.image-with-text.settings.text_alignment.options__1.label"
        },
        {
          "value": "horizontal-center align-content--vertical-top",
          "label": "t:sections.image-with-text.settings.text_alignment.options__2.label"
        },
        {
          "value": "horizontal-right align-content--vertical-top",
          "label": "t:sections.image-with-text.settings.text_alignment.options__3.label"
        },
        {
          "value": "horizontal-left align-content--vertical-middle",
          "label": "t:sections.image-with-text.settings.text_alignment.options__4.label"
        },
        {
          "value": "horizontal-center align-content--vertical-middle",
          "label": "t:sections.image-with-text.settings.text_alignment.options__5.label"
        },
        {
          "value": "horizontal-right align-content--vertical-middle",
          "label": "t:sections.image-with-text.settings.text_alignment.options__6.label"
        },
        {
          "value": "horizontal-left align-content--vertical-bottom",
          "label": "t:sections.image-with-text.settings.text_alignment.options__7.label"
        },
        {
          "value": "horizontal-center align-content--vertical-bottom",
          "label": "t:sections.image-with-text.settings.text_alignment.options__8.label"
        },
        {
          "value": "horizontal-right align-content--vertical-bottom",
          "label": "t:sections.image-with-text.settings.text_alignment.options__9.label"
        }
      ],
      "default": "horizontal-left align-content--vertical-bottom"
    },
    {
      "type": "range",
      "id": "spacing",
      "label": "t:raw-extra-words.settings_schema.labels.spacing",
      "min": -12,
      "max": 60,
      "step": 1,
      "default": 12,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "gutter",
      "label": "t:raw-extra-words.sections.vertical-slider.settings.text.text_padding",
      "options": [
        {
          "value": "none",
          "label": "t:raw-extra-words.settings_schema.labels.media_shape_options.option_0"
        },
        {
          "value": "grid-padding",
          "label": "t:raw-extra-words.settings_schema.options.default"
        },
        {
          "value": "large",
          "label": "t:raw-extra-words.settings_schema.options.regular"
        },
        {
          "value": "xlarge",
          "label": "t:raw-extra-words.settings_schema.options.large"
        }
      ],
      "default": "large"
    },
    {
      "type": "select",
      "id": "width",
      "label": "t:sections.image-with-text.settings.text_width.label",
      "options": [
        {
          "label": "t:raw-extra-words.settings_schema.options.small",
          "value": "50"
        },
        {
          "label": "t:sections.image-with-text.settings.text_width.options__1.label",
          "value": "70"
        },
        {
          "label": "t:sections.image-with-text.settings.text_width.options__2.label",
          "value": "90"
        }
      ],
      "default": "70"
    },
    {
      "type": "header",
      "content": "t:raw-extra-words.settings_schema.colors.header_inner"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme_card",
      "label": "t:color-schemes.name_singular",
      "default": "scheme_1"
    },
    {
      "type": "checkbox",
      "id": "disable_border",
      "label": "t:raw-extra-words.settings_schema.borders.remove.hide_borders",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "remove_border_radius",
      "label": "t:raw-extra-words.settings_schema.borders.remove.radius",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "remove_padding",
      "label": "t:raw-extra-words.settings_schema.borders.remove.padding_and_border",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "t:theme_blocks.grid-text.name",
      "blocks": [
        {
          "type": "text",
          "settings": {
            "text": "<p>Use this text to share information about your brand with your customers. Describe a product, share announcements or welcome customers to your store.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
